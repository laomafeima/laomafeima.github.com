#新安装的服务器需要做的事情。
修改 ssh 配置  
修改 /etc/ssh/sshd_config  
     修改端口 Port 9865  
     进制密码登录PasswordAuthentication no  

修改时区  
     sudo tzconfig，如果命令不存在请使用 dpkg-reconfigure tzdata  
     选择上海  
     sudo cp /usr/share/zoneinfo/Asia/ShangHai /etc/localtime  
     防止系统重启后时区改变  
     ntpdate cn.pool.ntp.org 设置网络时间同步  

安装 fail2ban  
InstallationTo install fail2ban, type the following in the terminal:  

```
sudo apt-get install fail2ban
```

ConfigurationTo configure fail2ban, make a 'local' copy the jail.conf file in /etc/fail2ban

```
cd /etc/fail2ban
sudo cp jail.conf jail.local
```

Now edit the file:

```
sudo vim jail.local
```

Set the IPs you want fail2ban to ignore, the ban time (in seconds) and maximum number of user attempts to your liking:

```
[DEFAULT]
# "ignoreip" can be an IP address, a CIDR mask or a DNS host
ignoreip = 127.0.0.1
bantime  = 3600
maxretry = 3
```

Email NotificationNote: You will need sendmail or any other MTA to do this.
If you wish to be notified of bans by email, modify this line with your email address:

```
destemail = your_email@domain.com
```

Then find the line:

```
action = %(action_)s
```
and change it to

```
action = %(action_mw)s
```

Jail ConfigurationJails are the rules which fail2ban apply to a given application/log:

```
[ssh]
enabled = true
port    = ssh
filter  = sshd
logpath  = /var/log/auth.log
maxretry = 3
```

To enable the other profiles, such as [ssh-ddos], make sure the first line beneath it reads:

```
enabled = true
```
Once done, restart fail2ban to put those settings into effect
```
sudo /etc/init.d/fail2ban restart
```
