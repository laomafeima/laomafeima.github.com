<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Let's Encrypt Nginx 配置</title>

    <link rel="icon" type="image/png" href="/static/favicon.png">
    <link rel="stylesheet" href="/static/main.css">
    <link rel="stylesheet" href="/static/markdown.css">
</head>
<body>
<header>
</header>
<div class="markdown-body">
    <h1>Let's Encrypt Nginx 配置</h1>
<h2>配置 Let's Encrypt 客户端</h2>
<p>本地需要安装 Let's Encrypt 客户端。可以直接从 Github 下载
<code>$ git clone https://github.com/letsencrypt/letsencrypt
$ cd letsencrypt
$ ./letsencrypt-auto --help</code></p>
<p>执行后可能会下载一些依赖的库</p>
<p>输入命令，指定目录和域名
<code>./letsencrypt-auto certonly -a webroot --webroot-path=/usr/share/nginx/html -d example.com</code>
会在 ｀ls -l /etc/letsencrypt/live/example.com/｀ 目录下生成</p>
<p><code>cert.pem: Your domain's certificate
chain.pem: The Let's Encrypt chain certificate
fullchain.pem: cert.pem and chain.pem combined
privkey.pem: Your certificate's private key</code></p>
<p>配置 Nginx 
<code>listen 443 ssl;
server_name example.com www.example.com;
ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;</code></p>
<p>配置 HTTP 转发 HTTPS</p>
<p><code>server {
    listen 80;
    server_name example.com www.example.com;
    return 301 https://$host$request_uri;
}</code></p>
<p>配置自动更新</p>
<p><code>30 0 */60 * * /home/ma/work/letsencrypt/letsencrypt-auto renew &gt;&gt; /var/log/le-renew.log                                                                                                                     
35 0 */60 * * /etc/init.d/nginx reload</code></p>
<h2></h2>
<h2></h2>
</div>
<footer>
    <a href="/about.html" target="_blank" class="muted">关于我</a>
</footer>
<script src="/static/min.js"></script>
</body>
</html>
